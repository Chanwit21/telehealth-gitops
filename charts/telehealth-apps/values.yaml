# Default values for telehealth-apps Helm chart

# Global settings
global:
  environment: development
  namespace: telehealth

# PostgreSQL Configuration
postgresql:
  enabled: true
  name: postgres
  image:
    repository: postgres
    tag: "16-alpine"
    pullPolicy: IfNotPresent
  
  replicaCount: 1
  
  # Resource requests and limits
  resources:
    requests:
      memory: "256Mi"
      cpu: "100m"
    limits:
      memory: "512Mi"
      cpu: "500m"
  
  # Storage
  persistence:
    enabled: true
    storageClass: "standard"
    size: 10Gi
    mountPath: /var/lib/postgresql/data
  
  # Environment variables
  env:
    POSTGRES_DB: telehealth
    POSTGRES_USER: postgres
    POSTGRES_PASSWORD: changeme123  # CHANGE THIS IN PRODUCTION
  
  # Service configuration
  service:
    type: ClusterIP
    port: 5432
    targetPort: 5432
  
  # Liveness and readiness probes
  livenessProbe:
    enabled: true
    initialDelaySeconds: 30
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 3
  
  readinessProbe:
    enabled: true
    initialDelaySeconds: 10
    periodSeconds: 5
    timeoutSeconds: 3
    failureThreshold: 3

# Redis Configuration
redis:
  enabled: true
  name: redis
  image:
    repository: redis
    tag: "7-alpine"
    pullPolicy: IfNotPresent
  
  replicaCount: 1
  
  # Resource requests and limits
  resources:
    requests:
      memory: "128Mi"
      cpu: "50m"
    limits:
      memory: "256Mi"
      cpu: "250m"
  
  # Storage
  persistence:
    enabled: false
    storageClass: "standard"
    size: 5Gi
    mountPath: /data
  
  # Service configuration
  service:
    type: ClusterIP
    port: 6379
    targetPort: 6379
  
  # Redis specific settings
  args: []
  
  # Liveness and readiness probes
  livenessProbe:
    enabled: true
    initialDelaySeconds: 10
    periodSeconds: 10
    timeoutSeconds: 3
    failureThreshold: 3
  
  readinessProbe:
    enabled: true
    initialDelaySeconds: 5
    periodSeconds: 5
    timeoutSeconds: 2
    failureThreshold: 3
# Telethai Master Data API Configuration
telethaiBapi:
  enabled: true
  name: telethai-api
  image:
    repository: ghcr.io/chanwit21/telethai-master-data-api
    tag: "latest"
    pullPolicy: IfNotPresent
  
  replicaCount: 1
  
  # Resource requests and limits
  resources:
    requests:
      memory: "256Mi"
      cpu: "100m"
    limits:
      memory: "512Mi"
      cpu: "500m"
  
  # Service configuration
  service:
    type: ClusterIP
    port: 8001
    targetPort: 8001
  
  # Environment variables from ConfigMap
  # DATABASE_HOST and REDIS_HOST use internal Kubernetes DNS
  # Format: service-name.namespace.svc.cluster.local
  env:
    DATABASE_HOST: postgres.telehealth-dev.svc.cluster.local
    DATABASE_PORT: "5432"
    DATABASE_USER: postgres
    DATABASE_PASSWORD: dev_password_change_me
    DATABASE_NAME: telehealth_dev
    REDIS_HOST: redis.telehealth-dev.svc.cluster.local
    REDIS_PORT: "6379"
    REDIS_PASSWORD: ""
    NODE_ENV: development
    PORT: "8001"
  
  # Liveness and readiness probes
  livenessProbe:
    enabled: true
    initialDelaySeconds: 30
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 3
  
  readinessProbe:
    enabled: true
    initialDelaySeconds: 10
    periodSeconds: 5
    timeoutSeconds: 3
    failureThreshold: 3